<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="IafasPaacProceso">
	<resultMap id="iafasPaacProceso" type="IafasPaacProceso" />
	<select id="showPaacProceso" resultType="ep.mil.pe.iafas.logistica.model.IafasPaacProcesos"
		parameterType="ep.mil.pe.iafas.logistica.model.IafasPaacProcesos">
		SELECT cperiodo_codigo periodo, nfuente_financiamiento_codigo nfuenteFinanciamiento,
		npac_procesos_codigo npacProcesoCodigo, 
		vpac_procesos_numero_paac vpacProcesosNumeroPaac,
		nproceso_etapa_codigo nprocesoEtapaCodigo, 
		vpac_procesos_numero_proceso vpacProcesoNumero,
		npac_procesos_monto_proceso npacProcesoMonto, VPAC_PROCESOS_DESCRIPCION vpacProcesoDescripcion
		FROM iafas_pac_procesos WHERE cperiodo_codigo = #{periodo}
	</select>
	
   <select id="saveProcess" parameterType="ep.mil.pe.iafas.logistica.model.IafasPaacProcesos" statementType="CALLABLE">
       { CALL SP_PAAC_PROCESOS(
        #{periodo mode=IN, jdbcType=VARCHAR},
		#{nfuenteFinanciamiento, mode=IN, jdbcType=INTEGER},
		#{npacProcesoCodigo, mode=IN, jdbcType=INTEGER},
		#{vpacProcesosNumeroPaac, mode=IN,jdbcType=VARCHAR},
		#{nprocesoEtapaCodigo, mode=IN,jdbcType=INTEGER},
		#{nprocesoDocumentoCodigo, mode=IN,jdbcType=INTEGER},
		#{ctipoProcedimientoCodigo, mode=IN,jdbcType=VARCHAR},
		#{ntipoProcesoContratacion, mode=IN,jdbcType=INTEGER},
		#{vpacProcesoNumero, mode=IN,jdbcType=VARCHAR},
	    #{vpacProcesoDescripcion, mode=IN,jdbcType=VARCHAR},
		#{cpacProcesoCompras, mode=IN,jdbcType=VARCHAR},
		#{npacProcesoCertificado, mode=IN,jdbcType=INTEGER},
		#{dpacProcesoConvocatoria, mode=IN,jdbcType=DATE},
		#{dpacProcesoParticipantes, mode=IN,jdbcType=DATE},
		#{dpacProcesoObservaciones, mode=IN,jdbcType=DATE},
		#{dpacProcesoAbsolucion, mode=IN,jdbcType=DATE},
		#{dpacProcesoIntegracion, mode=IN,jdbcType=DATE},
		#{dpacProcesoOfertas, mode=IN,jdbcType=DATE},
		#{dpacProcesoEvaluacion, mode=IN,jdbcType=DATE},
		#{dpacProcesoBuenaPro, mode=IN,jdbcType=DATE},
		#{dpacProcesoConsentimiento, mode=IN,jdbcType=DATE},
		#{dprocesoContrato, mode=IN,jdbcType=DATE},
		#{npacProcesoMonto, mode=IN,jdbcType=DECIMAL},
		#{vusuarioCodigo, mode=IN,jdbcType=VARCHAR},
		#{tipo, mode=IN,jdbcType=VARCHAR})}
		
		
   </select>

	<select id="saveProcessDetails" parameterType="ep.mil.pe.iafas.logistica.model.IafasPaacProcesoDetalle" 
	  statementType="CALLABLE">
       { CALL SP_PAAC_PROCESO_DETALLE(
        #{periodo mode=IN, jdbcType=VARCHAR},
        #{nfuenteFinanciamiento mode=IN, jdbcType=INTEGER},
		#{npacProcesoCodigo, mode=IN, jdbcType=INTEGER},
		#{nitemCodigo, mode=IN, jdbcType=INTEGER},
		#{nprocesoDetCantidad, mode=IN,jdbcType=DECIMAL},
		#{nprocesoDetPrecio, mode=IN,jdbcType=DECIMAL},
		#{cunidadMedidaCodigo, mode=IN,jdbcType=VARCHAR},
		#{vpacProcesoObs, mode=IN,jdbcType=VARCHAR},
		#{npacProcesoDetalleItem, mode=IN,jdbcType=INTEGER},
		#{vusuarioCodigo, mode=IN,jdbcType=VARCHAR})}
		
   </select>
   <select id="showDetailContract"  resultType="ep.mil.pe.iafas.logistica.model.IafasPacContratos"
		parameterType="ep.mil.pe.iafas.logistica.model.IafasPacContratos">
     SELECT ncontrato_codigo ncontratoCodigo, 
     cperiodo_codigo cperiodoCodigo,
	LOG_NOM_ITEM(nitem_codigo) as nomItem, 
	LOG_NOM_UM(cunidad_medida_codigo) unidadMedida, 
	npac_contrato_detalle_cantidad cantidad, 
	npac_contrato_detalle_monto montoMNDetalle,
	npac_contrato_detalle_extranjera montoMEDetalle
 	FROM iafas_pac_contratos_detalle WHERE cperiodo_codigo = #{cperiodoCodigo} AND ncontrato_codigo = #{ncontratoCodigo}
   </select>
   
   <select id="showProcessHead" resultType="ep.mil.pe.iafas.logistica.model.IafasPaacProcesos"
		parameterType="ep.mil.pe.iafas.logistica.model.IafasPaacProcesos">
		SELECT cperiodo_codigo periodo, 
		vpac_procesos_numero_paac vpacProcesosNumeroPaac,
		vpac_procesos_numero_proceso vpacProcesoNumero, 
		vpac_procesos_descripcion vpacProcesoDescripcion,
		npac_procesos_monto_proceso npacProcesoMonto
		FROM iafas_pac_procesos 
		WHERE cperiodo_codigo = #{periodo} AND npac_procesos_codigo = #{npacProcesoCodigo}
   </select>
</mapper>


